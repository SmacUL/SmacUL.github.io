(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{237:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"部署到-github-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署到-github-page"}},[s._v("#")]),s._v(" 部署到 Github Page")]),s._v(" "),a("p",[s._v("配置的部分在 正式的配置 一节中.")]),s._v(" "),a("h2",{attrs:{id:"捋一捋"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#捋一捋"}},[s._v("#")]),s._v(" 捋一捋")]),s._v(" "),a("p",[s._v("由于我们自己的 Vuepress 项目的主要成分不是 HTML , 而是像什么 js md 文件, 那么就需要我们先想办法, 把当前项目变成静态的 HTML 集合.")]),s._v(" "),a("p",[s._v("然后将静态页面上传到 Github Page 仓库中; 同时, 我们还是需要保存项目中的 js md 等文件, 把青山留下来;")]),s._v(" "),a("p",[s._v("官网在 "),a("a",{attrs:{href:"https://www.vuepress.cn/guide/deploy.html#github-pages",target:"_blank",rel:"noopener noreferrer"}},[s._v("指南-部署-GitHub Pages"),a("OutboundLink")],1),s._v(" 一节中提到了创建 deploy.sh 脚本, 这个脚本将为我们自动化完成静态页面的生成, 和静态页面的上传工作.")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本抛出遇到的错误")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成静态文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run docs:build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入生成的文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" docs/.vuepress/dist\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置下方仓库地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[s._v("上面的脚本中高亮的一行内容, 表明这个文件在会自动在 "),a("code",[s._v("dist")]),s._v(" 下创建 git , 也就不需要我们在本地创建分支了.")]),s._v(" "),a("p",[s._v("如此, 我们至少需要")]),s._v(" "),a("ul",[a("li",[s._v("一个本地仓库, 包含一个分支, 用于存放源文件")]),s._v(" "),a("li",[s._v("一个远程仓库, 包含两个分支, 一个分支用于存放源文件, 另一个用于存放渲染完毕的页面.\n来完成这个任务;")])]),s._v(" "),a("p",[s._v("此外, git 将代码从本地传到远程, 都是需要密码的, 但是上面脚本明显没有密码的描述, 那么就需要配置 ssh 免密登录;")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("docs:build")]),s._v(" 可以产生静态页面, 上面说过, Vuepress 是一个约定大于配置的框架, 那么, 这个指令生成的页面默认在 "),a("code",[s._v("docs/.vuepress/dist/")]),s._v(" 下;")])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("Github Page 规定, 用于存放静态页面的分支必须是 master 分支.")])]),s._v(" "),a("h4",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),a("p",[s._v("在官网的帮助下, 我们还需要完成几件事:")]),s._v(" "),a("ol",[a("li",[s._v("获取一个自己的 github.io 仓库, 用于存放自己的静态页面和源码;")]),s._v(" "),a("li",[s._v("项目下新建 git 仓库, 配置 .gitignore , 让这个仓库连接 github.io 仓库, 同时在本地创建第二个分支;")]),s._v(" "),a("li",[s._v("配置 SSH , 允许 git 免密上传;")]),s._v(" "),a("li",[s._v("利用脚本, 生成静态页面, 并将页面上传至 github.io 的主分支, 然后将项目源码上传到 github.io 的第二个分支;")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("可以聪明一些, 把 git 上传源码的操作也写到官网的脚本中;")])]),s._v(" "),a("h2",{attrs:{id:"正式的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正式的配置"}},[s._v("#")]),s._v(" 正式的配置")]),s._v(" "),a("h3",{attrs:{id:"获取-github-io-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取-github-io-仓库"}},[s._v("#")]),s._v(" 获取 Github.io 仓库")]),s._v(" "),a("p",[s._v("官网创建一个 "),a("code",[s._v("<用户名>.github.io")]),s._v(" 的仓库, 名字不要乱取;")]),s._v(" "),a("h3",{attrs:{id:"github-io-仓库设置分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-io-仓库设置分支"}},[s._v("#")]),s._v(" Github.io 仓库设置分支")]),s._v(" "),a("p",[s._v("默认情况下会有一个 master 分支, 我们需要再建立一个源码分支(我就用 code 代替了),\n"),a("img",{attrs:{src:"/note/img/2019-12-10-11-32-05.png",alt:""}}),s._v("\n如图所示, 如果输入 code , 就会建立一个新的远程分支 code .")]),s._v(" "),a("h3",{attrs:{id:"github-io-修改默认分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-io-修改默认分支"}},[s._v("#")]),s._v(" Github.io 修改默认分支")]),s._v(" "),a("p",[s._v("前面说过, 将存放源码的分支设置为 default 分支比较合理.\n"),a("img",{attrs:{src:"/note/img/2019-12-10-11-34-45.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"创建本地-git-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建本地-git-仓库"}},[s._v("#")]),s._v(" 创建本地 Git 仓库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin https://github.com/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建本地分支, 我叫 code , 后面直接上传就行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("分支名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"配置-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-ssh"}},[s._v("#")]),s._v(" 配置 SSH")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-keygen\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这个操作会生成一个公钥 "),a("code",[s._v("id_rsa.pub")]),s._v(" 和一个私钥 "),a("code",[s._v("id_rsa")]),s._v(" , 生成公钥和私钥的时候, 留意一下输出路径;"),a("br"),s._v("\n在 Github 官网的 "),a("code",[s._v("settings-SSH and GPG keys")]),s._v(" 中 new 一个 SSH key , 在弹出的对话框中, 将公钥内的内容粘贴进去;")]),s._v(" "),a("h3",{attrs:{id:"修改脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改脚本"}},[s._v("#")]),s._v(" 修改脚本")]),s._v(" "),a("p",[s._v("修改 deploy.sh 使其能够同时上传源码和页面;")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本抛出遇到的错误")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成静态文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run docs:build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入生成的文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" docs/.vuepress/dist\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果发布到 https://<USERNAME>.github.io")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f git@github.com:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".github.io.git master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退回到项目根目录, 上传源码; ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" *\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'code'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意修改 分支名称 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("分支名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("实践说明, 在 Github 中, 将存放源文件的分支设置为默认分支是一个更加好的选择.")])]),s._v(" "),a("h2",{attrs:{id:"最后的最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后的最后"}},[s._v("#")]),s._v(" 最后的最后")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("bash deploy.sh")]),s._v(" 指令, 就可以完成 build 和上传工作;")])])}),[],!1,null,null,null);t.default=e.exports}}]);