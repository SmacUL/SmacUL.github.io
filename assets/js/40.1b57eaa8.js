(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{225:function(e,t,s){"use strict";s.r(t);var a=s(0),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"public-key-infrastructure-lab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#public-key-infrastructure-lab"}},[e._v("#")]),e._v(" Public-Key Infrastructure Lab")]),e._v(" "),s("h2",{attrs:{id:"pre-experiment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pre-experiment"}},[e._v("#")]),e._v(" Pre-Experiment")]),e._v(" "),s("p",[e._v("一个基础性的问题是没有一个简单的方式去验证公钥的所有者.\n如何保证公钥确实属于 claimed 所有者.\nPublic Key Infrastructure PKI 是一种非常经典的解决方案.")]),e._v(" "),s("p",[e._v("我们将在这个实验中理解 Public-Key-Infrastructure 能够得到信任的根源, 如果系统信任了这样的漏洞.")]),e._v(" "),s("p",[e._v("几个主题:")]),e._v(" "),s("ul",[s("li",[e._v("公钥编码")]),e._v(" "),s("li",[e._v("public key infrastructure")]),e._v(" "),s("li",[e._v("CA 以及 根 CA")]),e._v(" "),s("li",[e._v("X.509 和自我签名")]),e._v(" "),s("li",[e._v("Apache HTTP and HTTPS")]),e._v(" "),s("li",[e._v("man in the middle attacks? (中间人攻击?)")])]),e._v(" "),s("p",[e._v("在这个实验中, 我们还将使用到 openssl 命令和库.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://seedsecuritylabs.org/Labs_16.04/PDF/Crypto_PKI.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("实验指导"),s("OutboundLink")],1)]),e._v(" "),s("h2",{attrs:{id:"t1-becoming-a-certification-authority-ca"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t1-becoming-a-certification-authority-ca"}},[e._v("#")]),e._v(" T1 Becoming a Certification Authority (CA)")]),e._v(" "),s("p",[e._v("在这个实验中, 我们需要创建 digital certificates, 我们自己做自己的 CA. 然后使用这个 CA 来给别的什么东西提供验证服务.")]),e._v(" "),s("h3",{attrs:{id:"the-configuration-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-configuration-file"}},[e._v("#")]),e._v(" The Configuration File")]),e._v(" "),s("p",[e._v("有一个文件 "),s("em",[e._v("openssl.conf")]),e._v(".\n这里有一个问题: 就是 OpenSSL 是什么.\n需要现有 "),s("em",[e._v("openssl.conf")]),e._v(" 文件, 然后使用 OpenSSL 生成 certificates.")]),e._v(" "),s("p",[e._v("ATC 我们可能需要处理一下 openssl 这玩意")]),e._v(" "),s("p",[e._v("openssl 一共有三个命令: ca, req, x509.\n"),s("code",[e._v("/usr/lib/ssl/openssl.cnf")]),e._v(" 可以提供这样的配置文件, 可以复制他.")]),e._v(" "),s("p",[e._v("然后在 "),s("em",[e._v("openssl.cnf")]),e._v(" 所在的目录下, 创建几个子目录与文件.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" demoCA demoCA/certs demoCA/crl demoCA/newcerts\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" demoCA/index.txt\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" demoCA/serial\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("关于 index.txt 与 serial 文件的内容")]),e._v(" "),s("p",[s("em",[e._v("index.txt")]),e._v(" 内容为空. 特别注意, 能够打开 "),s("em",[e._v("index.txt")]),e._v(" 文件的软件 (例如 gedit) 一定要用 tab 替换成 backspace."),s("br"),e._v("\nserial 可以填入其他的数字, 他的功能应该就是个计数器.")])]),e._v(" "),s("h3",{attrs:{id:"certificate-authority-ca"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#certificate-authority-ca"}},[e._v("#")]),e._v(" Certificate Authority (CA)")]),e._v(" "),s("p",[e._v("这一步好像是创建 Certifate Authority")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ openssl req -new -x509 -keyout ca.key -out ca.crt -config openssl.cnf\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("上面的指令获得两个输出文件: "),s("em",[e._v("ca.key")]),e._v(" (私钥证书)和 "),s("em",[e._v("ca.crt")]),e._v(" (公钥证书)")]),e._v(" "),s("h2",{attrs:{id:"t2-creating-a-certification-for-seedpkilab2018-com"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t2-creating-a-certification-for-seedpkilab2018-com"}},[e._v("#")]),e._v(" T2 Creating a Certification for SEEDPKILab2018.com")]),e._v(" "),s("p",[e._v("现在我们有能力给出 digital certificates. 第一个公司叫做 "),s("em",[e._v("SEEDPKILab2018.com")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"t1-1-generate-public-private-key-pair"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t1-1-generate-public-private-key-pair"}},[e._v("#")]),e._v(" T1.1 Generate public/private key pair")]),e._v(" "),s("p",[e._v("我们需要有公钥和私钥对.  RSA.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ openssl genrsa -aes128 -out server.key "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1024")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("使用 aes128 encryption algorithm. 秘钥存在在 "),s("em",[e._v("server.key")]),e._v(". 另一条指令可以将 "),s("em",[e._v("server.key")]),e._v(" 转成文本, 方便阅读.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ openssl rsa -in server.key -text\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("指令 "),s("code",[e._v("openssl rsa -in server.key -out server.key.unsecure")]),e._v(" 可以获得免密的 server key.")])]),e._v(" "),s("h3",{attrs:{id:"t1-2-generate-a-certificate-signing-request-csr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t1-2-generate-a-certificate-signing-request-csr"}},[e._v("#")]),e._v(" T1.2 Generate a Certificate Signing Request (CSR)")]),e._v(" "),s("p",[e._v("CSR 也就是证书签名申请? 包含了企业的公钥?\nCSR 会被送给 CA, CA 将生成秘钥的证书.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 这一步中要在 common_name 一条中输入 seedpkilab2018.com 绑定站点, 其他内容可以不填")]),e._v("\n$ openssl req -new -key server.key -out server.csr -config openssl.cnf\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("依据描述, certificate signing request 和 certificate authority 是一对的.")]),e._v(" "),s("h3",{attrs:{id:"t1-3-generating-certificates"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t1-3-generating-certificates"}},[e._v("#")]),e._v(" T1.3 Generating Certificates")]),e._v(" "),s("p",[e._v("CSR file 需要有 CA 的签名才能产出证书.\n在实验最开始的时候, 我们就有了自己的 CA.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ openssl ca -in server.csr -out server.crt -cert ca.crt -keyfile ca.key -config openssl.cnf\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("实验指导中给出了 如果 CA 拒绝生成证书的解决方案.")]),e._v(" "),s("p",[s("img",{attrs:{src:"/note/img/2020-02-23-11-23-57.png",alt:""}})]),e._v(" "),s("h2",{attrs:{id:"t3-deploying-certificate-in-an-https-web-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t3-deploying-certificate-in-an-https-web-server"}},[e._v("#")]),e._v(" T3 Deploying Certificate in an HTTPS Web Server")]),e._v(" "),s("p",[e._v("这一步, 我们将 public-key 用在网站上. 使用 openssl 内建的 web 服务器去建立一个 HTTPS 的站点.")]),e._v(" "),s("h3",{attrs:{id:"t3-1-configuring-dns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t3-1-configuring-dns"}},[e._v("#")]),e._v(" T3.1 Configuring DNS")]),e._v(" "),s("p",[e._v("配置 DNS, 修改 "),s("code",[e._v("/etc/hosts")]),e._v(", 配置 "),s("code",[e._v("127.0.0.1 SEEDPKILab2018.com")])]),e._v(" "),s("h3",{attrs:{id:"t3-2-configuring-the-web-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t3-2-configuring-the-web-server"}},[e._v("#")]),e._v(" T3.2 Configuring the web server")]),e._v(" "),s("p",[e._v("配置 web 服务器.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" server.key server.pem\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" server.crt "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">>")]),e._v(" server.pem\n$ openssl s_server -cert server.pem -www\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("现在, 服务将会监听 4433 端口.\n使用 "),s("code",[e._v("https://SEEDPKILab2018.com:4433/")]),e._v("\n来访问.\n不出意外的话, 我们会收到一份来自浏览器的错误信息. 大概是说当前的网站没有合法的证书.")]),e._v(" "),s("p",[s("img",{attrs:{src:"/note/img/2020-02-23-11-21-21.png",alt:""}})]),e._v(" "),s("h3",{attrs:{id:"t3-3-getting-the-browser-to-accept-our-ca-certificate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t3-3-getting-the-browser-to-accept-our-ca-certificate"}},[e._v("#")]),e._v(" T3.3 Getting the browser to accept our CA Certificate")]),e._v(" "),s("p",[e._v("让浏览器接受 CA 证书. 有两种方式:")]),e._v(" "),s("ol",[s("li",[e._v("请求 Mozilla 去包含我们的 CA 证书在 FireFox 软件, 用屁股想都知道这不可能.")]),e._v(" "),s("li",[e._v("让浏览器加载 "),s("em",[e._v("ca.crt")]),e._v(" (公钥证书) "),s("code",[e._v("Edit -> Preference-> Privacy & Security -> View Certificates")])])]),e._v(" "),s("h3",{attrs:{id:"t3-4-testing-our-https-website"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t3-4-testing-our-https-website"}},[e._v("#")]),e._v(" T3.4 Testing our HTTPS website")]),e._v(" "),s("p",[e._v("测试我们的 HTTPS 网站. 重新操作 Step2.")]),e._v(" "),s("p",[e._v("然后我们需要重复接下来的任务:")]),e._v(" "),s("ol",[s("li",[e._v("仅仅修改 "),s("em",[e._v("server.pem")]),e._v(" 中的一位, 重启服务器, 重载 URL, (请先备份 "),s("em",[e._v("server.pem")]),e._v(") 另外, 如果服务起不来, 可能是 "),s("em",[e._v("server.pem")]),e._v(" 不该改的位置被改了. 并不会有什么影响.")]),e._v(" "),s("li",[e._v("尝试使用 https://localhost:4433 , 我感觉应该会不行. 的确不行, 仍然会显示是一个没有认证过的网站, 不允许访问. 本地 CA 没有对 localhost 进行授权.")])]),e._v(" "),s("h2",{attrs:{id:"t4-deploying-certificate-in-an-apache-based-https-website"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t4-deploying-certificate-in-an-apache-based-https-website"}},[e._v("#")]),e._v(" T4 Deploying Certificate in an Apache-Based HTTPS Website")]),e._v(" "),s("p",[e._v("在一个 Apache-Based HTTPS website 中使用证书. 在这个实验中, 我们建立了一个真实的 HTTPS web server based on Apache.")]),e._v(" "),s("p",[e._v("实验指导给出了 example.com 的参考, 然后我们需要对 SEEDPKILab2018.com 也做一遍.")]),e._v(" "),s("h4",{attrs:{id:"部署一个小项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署一个小项目"}},[e._v("#")]),e._v(" 部署一个小项目")]),e._v(" "),s("p",[e._v("先在 Apache 的目录下部署一个项目:")]),e._v(" "),s("ol",[s("li",[e._v("在路径 "),s("code",[e._v("/var/www/")]),e._v(" 添加 "),s("code",[e._v("pki")]),e._v(" 文件夹")]),e._v(" "),s("li",[e._v("在 "),s("code",[e._v("pki")]),e._v(" 文件夹内添加 "),s("code",[e._v("index.html")]),e._v(", html 内容随意.")])]),e._v(" "),s("h4",{attrs:{id:"使用-http-浏览项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-http-浏览项目"}},[e._v("#")]),e._v(" 使用 HTTP 浏览项目")]),e._v(" "),s("p",[e._v("修改 "),s("code",[e._v("/etc/apache2/site-available/000-default.conf")]),e._v(", 添加")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("VirtualHost *:8"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("0")]),e._v(">")]),e._v("\n    ServerName SEEDPKILab2018.com\n    DocumentRoot /var/www/pki\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/VirtualHost"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("p",[e._v("现在重启 apache2 的 service, 并访问 "),s("code",[e._v("http://seedpkilab2018.com")]),e._v(" 应该可以看见 index.html 中内容.")]),e._v(" "),s("h4",{attrs:{id:"使用-https-浏览项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-https-浏览项目"}},[e._v("#")]),e._v(" 使用 HTTPS 浏览项目")]),e._v(" "),s("p",[e._v("修改 "),s("code",[e._v("/etc/apache2/site-available/default-ssl.conf")]),e._v(", 添加")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("VirtualHost *:44"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("3")]),e._v(">")]),e._v("\n    ServerName SEEDPKILab2018.com\n    DocumentRoot /var/www/pki\n    DirectoryIndex index.html\n\n    SSLEngine On\n    SSLCertificateFile /home/seed/Desktop/server.pem\n    SSLCertificateKeyFile /home/seed/Desktop/server.pem \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/VirtualHost"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br")])]),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" apachectl configtest\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" a2enmod ssl\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" a2ensite default-ssl\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" apache2 restart\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("p",[e._v("使用 HTTPS 协议访问 "),s("code",[e._v("https://seedpkilab2018.com")]),e._v(" 应该再次可以看见 index.html 中内容.")]),e._v(" "),s("h2",{attrs:{id:"t5-launching-a-man-in-the-middle-attack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t5-launching-a-man-in-the-middle-attack"}},[e._v("#")]),e._v(" T5 Launching a Man-In-The-Middle Attack")]),e._v(" "),s("p",[e._v("这一步主要展示: PKI 如何打败中间人攻击.")]),e._v(" "),s("p",[e._v("如果没有 PKI, 用户在访问 example.com 的时候就需要获取 server 的 public key.\nAlice 将会生成一个 secert, 然后使用 server 的 public key 去编码这个 secert. 然后再发给 Server.")]),e._v(" "),s("p",[e._v("攻击者可能拦截 Server 给出的 public key 然后替换成自己的 public key 再发给 用户. 如此攻击者是有能力读取用户发出的数据.")]),e._v(" "),s("p",[e._v("这个实验的主要目的就是帮助学生理解 PKI 如何打败这样的中间人攻击. 在这个攻击中, 我们将会模拟一个这样的 MITM 攻击, 然后看 PKI 如何击败它.")]),e._v(" "),s("p",[e._v("首先我们需要选择一个 website. 讲道理, example 是一个不错的选择, 但是这里更加建议使用一个现实的站点?")]),e._v(" "),s("p",[e._v("ATC: 这里需要作出一个假设, 用户实际访问的是 example.com 这个 web server. 但是, 我们假装发动了一次 DNS 缓存毒化攻击, 将 hosts 修改为 那个什么 2018 的 网站 ip, 也就是攻击者的网站 IP. 这样就创建了 attacker 与 victim 之间的通信.")]),e._v(" "),s("h3",{attrs:{id:"t5-1-setting-up-malicious-websites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t5-1-setting-up-malicious-websites"}},[e._v("#")]),e._v(" T5.1 Setting up malicious websites")]),e._v(" "),s("p",[e._v("这里的操作会模仿 T4 中的内容.")]),e._v(" "),s("p",[e._v("我们的目标是这样的: 当一个用户打算访问 example.com 的时候, 我们把他引到自己的 server, hosts 了一个假的 website for example.com. 然后他们可能在者之间写些什么东西.")]),e._v(" "),s("p",[e._v("模仿 T4 中的操作, 创建一个 "),s("code",[e._v("www.apple.com")]),e._v(" 的 ssl server.")]),e._v(" "),s("h3",{attrs:{id:"t5-2-becoming-the-man-in-the-middle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t5-2-becoming-the-man-in-the-middle"}},[e._v("#")]),e._v(" T5.2 Becoming the man in the middle")]),e._v(" "),s("p",[e._v("成为那个中间人. 可以攻击路由或者攻击 DNS. 这一步, 我们选择 DNS 攻击. 为了简化操作, 我们直接修改受害者的 "),s("code",[e._v("/etc/hosts")]),e._v(". 去模拟一个 DNS 缓存毒化攻击.\n"),s("code",[e._v("<IP_Address> example.com")]),e._v("\n这里的 IP_Address 应该是 malicious server 的 ip.")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.0")]),e._v(".2.14  www.apple.com\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"t5-3-browse-the-target-website"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t5-3-browse-the-target-website"}},[e._v("#")]),e._v(" T5.3 Browse the target website")]),e._v(" "),s("p",[e._v("重新浏览目标网站, 看看自己的浏览器说了什么.")]),e._v(" "),s("p",[e._v('浏览器表示: "警告: 面临潜在的安全风险." 没有任何 CA 对我们自己的 '),s("code",[e._v("www.apple.com")]),e._v(" ssl server 颁发证书.")]),e._v(" "),s("h2",{attrs:{id:"t6-launching-a-man-in-the-middle-attack-with-a-compromised-ca"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#t6-launching-a-man-in-the-middle-attack-with-a-compromised-ca"}},[e._v("#")]),e._v(" T6 Launching a Man-In-The-Middle Attack with a Compromised CA")]),e._v(" "),s("p",[e._v("这里做出了一个假设, 就是我们的 CA 已经被人收买, 给 "),s("code",[e._v("www.apple.com")]),e._v(" 创建 cert.")])])}),[],!1,null,null,null);t.default=r.exports}}]);